window.__require=function i(t,n,o){function e(c,a){if(!n[c]){if(!t[c]){var u=c.split("/");if(u=u[u.length-1],!t[u]){var h="function"==typeof __require&&__require;if(!a&&h)return h(u,!0);if(s)return s(u,!0);throw new Error("Cannot find module '"+c+"'")}}var r=n[c]={exports:{}};t[c][0].call(r.exports,function(i){return e(t[c][1][i]||i)},r,r.exports,i,t,n,o)}return n[c].exports}for(var s="function"==typeof __require&&__require,c=0;c<o.length;c++)e(o[c]);return e}({GameScene:[function(i,t,n){"use strict";cc._RF.push(t,"128b3cy0q9Mwb7FJLdPJWSA","GameScene"),cc.Class({extends:cc.Component,properties:{DinosaurNode:{default:null,type:cc.Node,displayName:"\u6050\u9f99\u8282\u70b9"},_SoundId:-1,SoundOfRun:{default:null,type:cc.AudioClip,displayName:"\u8349\u5730\u58f0\u97f3"},WinBox:{default:null,type:cc.Node,displayName:"\u80dc\u5229\u7684\u8282\u70b9"},winWindow:{default:null,type:cc.Node,displayName:"\u80dc\u5229\u8282\u70b9"}},onLoad:function(){cc.director.getPhysicsManager().enabled=!0,this.AnimationNameArray=["Wait","Up","Down","Left","Right"],this.DinosaurAnimation=this.DinosaurNode.getComponent(cc.Animation),this.CanMove=!1,this.TouchPos=null,this.PlayerState=0,this.GameWin=!1},start:function(){this.startListenTouchEvent()},startListenTouchEvent:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.TouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.TouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.TouchEnd,this)},TouchStart:function(i){1!=this.GameWin&&this.DinosaurNode.getBoundingBoxToWorld().contains(i.getLocation())&&(this.CanMove=!0,this.playSound())},TouchMove:function(i){if(0!=this.CanMove&&1!=this.GameWin){var t=this.node.convertToNodeSpaceAR(i.getLocation());this.TouchPos=t;var n=t.sub(this.DinosaurNode.position),o=t.sub(this.DinosaurNode.position).mag(),e=n.normalize();this.DinosaurNode.getComponent(cc.RigidBody).linearVelocity=o<10?cc.v2(n):cc.v2(250*e.x,250*e.y)}},TouchEnd:function(i){this.CanMove=!1,this.TouchPos=null,this.stopSound(),this.DinosaurNode.getComponent(cc.RigidBody).linearVelocity=cc.v2(0,0),this.PlayerState=0,this.DinosaurAnimation.play(this.AnimationNameArray[this.PlayerState])},update:function(i){if(1==this.CanMove&&0==this.GameWin&&null!=this.TouchPos){var t=this.TouchPos.sub(this.DinosaurNode.position),n=this.TouchPos.sub(this.DinosaurNode.position).mag(),o=t.normalize();this.DinosaurNode.getComponent(cc.RigidBody).linearVelocity=n<10?cc.v2(0,0):cc.v2(150*o.x,150*o.y);var e=this.CheckDirection();this.PlayerState!=e&&(this.PlayerState=e,this.DinosaurAnimation.play(this.AnimationNameArray[this.PlayerState])),this.CheckWin()}},playSound:function(){this._SoundId=cc.audioEngine.playEffect(this.SoundOfRun,!0)},stopSound:function(){cc.audioEngine.stopEffect(this._SoundId),this._SoundId=-1},CheckDirection:function(){return this.backDifference(this.TouchPos.x,this.DinosaurNode.x)>this.backDifference(this.TouchPos.y,this.DinosaurNode.y)?1==this.backNumberSize(this.TouchPos.x,this.DinosaurNode.x)?4:3:1==this.backNumberSize(this.TouchPos.y,this.DinosaurNode.y)?1:2},backDifference:function(i,t){return i=Math.ceil(i),t=Math.ceil(t),Math.abs(i-t)},backNumberSize:function(i,t){return(i=Math.ceil(i))>(t=Math.ceil(t))},CheckWin:function(){if(0==this.GameWin){var i=this.DinosaurNode.position;1==this.WinBox.getBoundingBox().contains(i)&&(console.log("\u80dc\u5229\u4e86"),this.GameWin=!0,this.PlayerState=0,this.DinosaurAnimation.play(this.AnimationNameArray[this.PlayerState]),this.showWinWindow(),this.stopSound())}},showWinWindow:function(){this.winWindow.getComponent("WinWindow").showWindow()}}),cc._RF.pop()},{}],WinWindow:[function(i,t,n){"use strict";cc._RF.push(t,"829d928vp5EnZEuQLqnoSY9","WinWindow"),cc.Class({extends:cc.Component,properties:{Effect:{default:null,type:cc.Node,displayName:"\u52a8\u753b"}},start:function(){},showWindow:function(){this.node.active=!0,this.Effect.getComponent(cc.Animation).play("Win");var i=cc.fadeIn(1),t=cc.delayTime(3),n=cc.fadeOut(.5),o=cc.callFunc(function(){this.node.opacity=0,this.node.active=!1}.bind(this)),e=cc.sequence(i,t,n,o);this.node.runAction(e)}}),cc._RF.pop()},{}]},{},["GameScene","WinWindow"]);